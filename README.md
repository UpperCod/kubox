# Kubox

It is a small tool created to control the status within applications, without increasing complexity by offering both synchronous and asynchronous coverage in only **540 bytes gzip**

## Introduction

### What is the state?

The state is an object, this has the current situation of what you want to observe, for example the interactions of an application.

### What is the store?

The blind is the instance of **kubox** this links the state with the subscribers and actions.


### What is an action?

To start working with kubox, you must understand the concept of **action** well.

An action is a function that allows to change or obtain the state of the store, this interaction can be synchronous or asynchronous.

Every action receives at least one argument, the **first parameter is defined by the store**, and gives the action in an object the aforementioned ability to modify or obtain the status through 2 functions:

* **set** : modify the state.
* **get** : get the status.

```javascript
function action({set,get}){
   set({state:"sync change"});

   setTimeout(()=>{
       set({state:"async change"})
   })
}
```

### What is middleware?

The middleware is only a function that allows to intercede the changes sent by the actions.

## Methods and properties

### Store([object state, object actions, function middleware])

The **Store** instance, can receive up to 3 arguments.

1. **state** : *{object}*, initial state for the store.
2. **actions** : *{object}*, state modifying actions.
2. **middleware** : *{function}*, controls the changes caused by the actions.


``` javascript
import Store from "kubox";

let state = {
   task : []
}

let actions = {
   task : {
       create({set,get},value){
           set(
               get().concat(value)
           );
       },
       remove({set,get},index){
           set(
               get().filter((value,indexSearch)=>indexSearch !== index)
           );
       }
   }
}

let store = new Store(state,actions);

store.actions.createTask("hello!");

store.state.task // ["hello!"];

```
> Please note that the actions are nested in a property this property **task** this will be the **space**, this means that the actions will only see and modify the state from the space property.

> The store arbitrarily defines the names of the actions to be registered using the **camel case** pattern, prefixing the name of the function to the origin of the property.

The **Store** instance returns the following properties

* **state** : {object}, state of the store.
* **actions** : {object}, actions registered in the store.
* **handlers** : {object}, grouping of subscribers.
* **setActions** : {function}, create or modify actions to the store.
* **subscribe** : {function}, add a subscriber to the store.

### setActions( object actions [, function middleware, string space])

This function creates or modifies actions in the store, receives 3 arguments:

* **actions** : {object}, group of functions to be defined as actions within the store.
* **middleware** : [function], function to intercede the changes generated by the actions.
* **space** : [string], name of space for actions.

### subscribe( function handler[, string  space]) : function unsubscribe

This function adds subscribers to the store, receives 2 arguments:

* **handler** : {function}, function that is notified of the changes.
* **space** : [string], string that allows subscribing only to the changes generated by actions linked to **space**

## Examples

