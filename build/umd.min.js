(function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Kubox=n()})(this,function(){"use strict";function t(t){return t.replace(/[\s\t\n\-\_]+(\w)/g,function(t,n){return n.toUpperCase()})}function n(n,e){return t(n+(n?" ":"")+e)}function e(t,n){if("object"==typeof nextState){var e=Object.keys(n);e.length&&(t.state=Object.assign({},t.state,n),e.concat("*").forEach(function(n){return(t.subscribers[n]||[]).forEach(function(n){return n(t.state)})}))}}var i=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),this.state=t,this.actions={},this.subscribers={},this.mapActions(n)};return i.prototype.subscribe=function t(n,e){if(void 0===e&&(e="*"),"function"==typeof n){var t=this.subscribers[e]=this.subscribers[e]||[];return t.push(n),function(){t.splice(t.indexOf(n)>>>0,1)}}},i.prototype.mapActions=function(t,e){var i=this;if(void 0===e&&(e=""),"object"==typeof t)for(var o in t){var r=t[o];"object"==typeof r&&i.mapActions(r,n(e,o)),"function"==typeof r&&i.action(o,r,e)}},i.prototype.action=function(t,i,o){var r=this;return void 0===o&&(o=""),t=n(o,t),this.actions[t]=function(){for(var n=[],s=arguments.length;s--;)n[s]=arguments[s];return i.apply(void 0,[{set:function(n){var i;return n=o?(i={},i[o]=n,i):n,"middleware"!==t&&r.actions.middleware?r.actions.middleware(t,n):e(r,n)},get:function(){return o?r.state[o]:r.state}}].concat(n))}},i});