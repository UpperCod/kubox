"use strict";function toCamelCase(t){return t.replace(/[\s\t\n\-\_]+(\w)/g,function(t,e){return e.toUpperCase()})}function nameSpace(t,e){return toCamelCase(t+(t?" ":"")+e)}function update(t,e){if("object"==typeof nextState){var n=Object.keys(e);n.length&&(t.state=Object.assign({},t.state,e),n.concat("*").forEach(function(e){return(t.subscribers[e]||[]).forEach(function(e){return e(t.state)})}))}}var Store=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.state=t,this.actions={},this.subscribers={},this.mapActions(e)};Store.prototype.subscribe=function t(e,n){if(void 0===n&&(n="*"),"function"==typeof e){var t=this.subscribers[n]=this.subscribers[n]||[];return t.push(e),function(){t.splice(t.indexOf(e)>>>0,1)}}},Store.prototype.mapActions=function(t,e){var n=this;if(void 0===e&&(e=""),"object"==typeof t)for(var o in t){var r=t[o];"object"==typeof r&&n.mapActions(r,nameSpace(e,o)),"function"==typeof r&&n.action(o,r,e)}},Store.prototype.action=function(t,e,n){var o=this;return void 0===n&&(n=""),t=nameSpace(n,t),this.actions[t]=function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return e.apply(void 0,[{set:function(e){var r;return e=n?(r={},r[n]=e,r):e,"middleware"!==t&&o.actions.middleware?o.actions.middleware(t,e):update(o,e)},get:function(){return n?o.state[n]:o.state}}].concat(r))}},module.exports=Store;